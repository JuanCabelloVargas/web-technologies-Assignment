<% if challenge.errors.any? %>
  <div class="alert alert-danger">
    <p class="mb-1"><strong>Could not save the challenge:</strong></p>
    <ul class="mb-0">
      <% challenge.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_with model: challenge, local: true do |f| %>
  <div class="mb-3">
    <%= f.label :name, "Name", class: "form-label" %>
    <%= f.text_field :name, class: "form-control", required: true %>
  </div>

  <div class="mb-3">
    <%= f.label :description, "Description", class: "form-label" %>
    <%= f.text_area :description, rows: 5, class: "form-control", required: true %>
  </div>

  <div class="row g-3">
    <div class="col-md-6">
      <%= f.label :start_date, "Start date", class: "form-label" %>
      <%= f.datetime_select :start_date, class: "form-control" %>
    </div>
    <div class="col-md-6">
      <%= f.label :end_date, "End date", class: "form-label" %>
      <%= f.datetime_select :end_date, class: "form-control" %>
    </div>
  </div>

  <div class="row g-3 mt-0">
    <div class="col-md-4">
      <%= f.label :category_id, "Category", class: "form-label" %>
      <%= f.collection_select :category_id, @categories, :id, :name, {}, class: "form-select" %>
    </div>
    <div class="col-md-4">
      <%= f.label :visibility, "Visibility", class: "form-label" %>
      <%= f.select :visibility,
                   @visibilities.map { |v| [v.titleize, v] },
                   {},
                   class: "form-select" %>
    </div>
    <div class="col-md-4">
      <%= f.label :status, "Status", class: "form-label" %>
      <%= f.select :status,
                   @statuses.map { |s| [s.titleize, s] },
                   {},
                   class: "form-select" %>
    </div>
  </div>

  <div class="d-flex justify-content-end gap-2 mt-4">
    <%= link_to "Cancel", challenge.persisted? ? challenge_path(challenge) : challenges_path, class: "btn btn-outline-secondary" %>
    <%= f.submit class: "btn btn-primary" %>
  </div>
<% end %>
